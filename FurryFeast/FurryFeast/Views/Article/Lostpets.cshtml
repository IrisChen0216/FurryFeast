<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css" integrity="sha512-XXXXXXX" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/js/bootstrap.bundle.min.js" integrity="sha512-XXXXXXX" crossorigin="anonymous"></script>

<div class="index-header">
    <h2>寵物遺失啟事</h2>
</div>
@model List<FurryFeast.Models.Lostpets>
@{

    var petTypes = (List<string>)ViewData["PetTypes"];
    var breeds = (List<string>)ViewData["Breeds"];
    var colors = (List<string>)ViewData["Colors"];
    var lostTimes = (List<string>)ViewData["LostTimes"];
    var genders = (List<string>)ViewData["Genders"];
}
<style>
    .search-button {
        border: 1px solid #ffd33b;
        background-color: #ffd33b;
        color: white;
        transition: background-color 0.3s ease, color 0.3s ease;
        text-decoration: none;
        padding: 10px;
        display: inline-block;
        text-align: center;
    }

        .search-button:hover {
            background-color: black;
            color: white;
        }
</style>

<div class="form-group" style="display: flex; align-items: center; gap: 1px;">
    <form id="filterForm" style="display: flex; align-items: center; gap: 1px;">
        <div style="margin-right: 5px;">
            <select id="petType" name="petType" class="form-control">
                <option value="">種類</option>
                @foreach (var petType in petTypes)
                {
                    <option value="@petType">@petType</option>
                }
            </select>
        </div>

        <div style="margin-right: 5px;">
            <select id="gender" name="gender" class="form-control">
                <option value="">性別</option>
                @foreach (var gender in genders)
                {
                    <option value="@gender">@gender</option>
                }
            </select>
        </div>

        <div style="margin-right: 5px;">
            <input type="text" id="breed" name="breed" class="form-control" placeholder="請輸入品種">
        </div>
        <div style="margin-right: 5px;">
            <input type="text" id="color" name="color" class="form-control" placeholder="請輸入毛色">
        </div>
        <div style="display: flex; flex-wrap: wrap; margin-right: 5px;">
            <input type="date" id="lostTime" name="lostTime" class="form-control">
        </div>
        <div style="margin-right: 5px;">
            <input type="text" id="lostLocation" name="lostLocation" class="form-control" placeholder="請輸入遺失地點">
        </div>
        <div>
            <input type="submit" class="search-button btn btn-primary" value="搜尋">
        </div>
    </form>
    <a href="@Url.Action("LostForm", "Article")" class="search-button btn btn-primary">我要通報走失</a>
</div>










<div class="row row-cols-3">
    @foreach (var animal in Model)
    {
        @if (!string.IsNullOrEmpty(animal.Picture))
        {
            <div class="col-lg-4 col-md-4 col-6 move-on-hover test">
                <a href="http://">
                    <div class="card-new" style="background: white; box-shadow: 0 15px 15px 0 rgba(0, 0, 0, 0.05);">
                        <div class="square-img-container">
                            <img src="@animal.Picture" alt="" onerror="this.onerror=null; this.src='https://images.pexels.com/photos/16652416/pexels-photo-16652416.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2';">

                        </div>
                        <div class="card-body-new">
                            <p>品種: @animal.Breed</p>
                            <p>毛色: @animal.Color</p>
                            <p>遺失時間: @animal.LostTime</p>
                            <p>遺失地點: @animal.LostLocation</p>
                        </div>
                    </div>
                </a>
            </div>
        }
    }
</div>







@section scripts {
    <script>
        $(document).ready(function () {
            $('#filterForm').on('submit', function (e) {
                e.preventDefault();
                var formData = $(this).serialize();

                $.ajax({
                    url: '@Url.Action("LoadLostPets", "Article")',
                    type: 'POST',
                    data: formData,
                    success: function (data) {
                        $('.row-cols-3').html(data);
                    }
                });
            });
        });
    </script>
}





<nav aria-label="Page navigation">
    <ul class="pagination">
        <li class="page-item @(ViewBag.PageNumber == 1 ? "disabled" : "")">
            <a class="page-link" href="@Url.Action("Lostpets", new { page = Math.Max(1, Convert.ToInt32(ViewBag.PageNumber) - 1) })">&lt;&lt;</a>
        </li>
        <li class="page-item @(ViewBag.PageNumber == 1 ? "disabled" : "")">
            <a class="page-link" href="@Url.Action("Lostpets", new { page = Math.Max(1, Convert.ToInt32(ViewBag.PageNumber) - 1) })">Previous</a>
        </li>

        @for (var i = Math.Max(1, Convert.ToInt32(ViewBag.PageNumber) - 5); i <= Math.Min(Convert.ToInt32(ViewBag.PageCount), Convert.ToInt32(ViewBag.PageNumber) + 5); i++)
        {
            <li class="page-item @(ViewBag.PageNumber == i ? "active" : "")">
                <a class="page-link" href="@Url.Action("Lostpets", new { page = i })">@i</a>
            </li>
            @if (i == Math.Min(Convert.ToInt32(ViewBag.PageCount), Convert.ToInt32(ViewBag.PageNumber) + 5) && i < Convert.ToInt32(ViewBag.PageCount))
            {
                <li class="page-item disabled">
                    <a class="page-link" href="#">...</a>
                </li>
            }
        }

        <li class="page-item @(ViewBag.PageNumber == ViewBag.PageCount ? "disabled" : "")">
            <a class="page-link" href="@Url.Action("Lostpets", new { page = Math.Min(Convert.ToInt32(ViewBag.PageNumber) + 1, Convert.ToInt32(ViewBag.PageCount)) })">Next</a>
        </li>
        <li class="page-item @(ViewBag.PageNumber == ViewBag.PageCount ? "disabled" : "")">
            <a class="page-link" href="@Url.Action("Lostpets", new { page = ViewBag.PageCount })">>></a>
        </li>
    </ul>
</nav>




